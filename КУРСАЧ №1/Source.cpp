#include <iostream>
#include <Windows.h>
#include <stdlib.h>
#include <ctime>
#include <clocale>
#include <fstream>

using namespace std;

//Îáüÿâëåíèå ãëîáàëüíûõ ïåğåìåííûõ
string userName_1, userName_2;
string winner;
string povtor = "Y";
int green_sqr = 0;
int red_sqr = 0;
bool per1, per2 = false;

//Ôóíêöèÿ äëÿ âûáîğà id öâåòà
enum ConsoleColor
{
	Black = 0,
	Blue = 1,
	Green = 2,
	Cyan = 3,
	Red = 4,
	Magenta = 5,
	Brown = 6,
	LightGray = 7,
	DarkGray = 8,
	LightBlue = 9,
	LightGreen = 10,
	LightCyan = 11,
	LightRed = 12,
	LightMagenta = 13,
	Yellow = 14,
	White = 15
};

//Óñòàíîâêà öâåòà ïî id èç ôóíêöèè ConsoleColor
void SetColor(int text, int background)
{
	HANDLE hStdOut = GetStdHandle(STD_OUTPUT_HANDLE);
	SetConsoleTextAttribute(hStdOut, (WORD)((background << 4) | text));
}

//Âûâîä íà ıêçàí êîëëè÷åñòâî çàõâà÷åííîé òåğğèòîğèè, èìÿ ïîáåäèòåëÿ è êóáîê
void priz(string winner)
{
	system("cls");

	SetColor(5, 0);
	cout << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr << endl;
	cout << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl << endl;
	SetColor(14, 0);
	SetColor(14, 0);
	if (winner == userName_1)
	{
		cout << "		  " << winner << " ÏÎÁÅÄÈË!\n\n";
	}
	else if (winner == userName_2)
	{
		cout << "		  " << winner << " ÏÎÁÅÄÈË!\n\n";
	}
	else
	{
		cout << "		    " << " ÍÈ×Üß!!!\n\n";
	}
	cout << "          vo¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶\n";
	cout << "           ¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶v\n";
	cout << "            ¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶v\n";
	cout << "             ¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶v\n";
	cout << "      oooov   ¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶o  vo¶¶ov\n";
	cout << "  v¶¶ov   vo¶oo¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶v¶¶v    o¶¶ov\n";
	cout << " ¶¶v        v¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶o          ¶¶o\n";
	cout << "¶¶v           v¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶o            ¶¶v\n";
	cout << "¶¶            v¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶o            o¶v\n";
	cout << "o¶v            ¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶v            ¶¶v\n";
	cout << "v¶o           v¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶o            v¶o\n";
	cout << " o¶v          o¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶           ¶¶v\n";
	cout << "  ¶¶v         ¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶o         ¶¶v\n";
	cout << "   o¶v       o¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶        ¶¶v\n";
	cout << "    o¶o      ¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶v     v¶¶\n";
	cout << "     v¶o    v¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶    v¶o\n";
	cout << "      v¶o   o¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶   v¶o\n";
	cout << "        ¶¶  ¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶v o¶v\n";
	cout << "         o¶v¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶oo¶v\n";
	cout << "          o¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶\n";
	cout << "           o¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶\n";
	cout << "            ¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶v\n";
	cout << "            v¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶o\n";
	cout << "             v¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶\n";
	cout << "               v¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶o\n";
	cout << "                o¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶\n";
	cout << "                  o¶¶¶¶¶¶¶¶¶¶¶¶¶¶\n";
	cout << "                     v¶¶¶¶¶¶¶o\n";
	cout << "                      o¶¶¶¶¶¶\n";
	cout << "                      v¶¶¶¶¶o\n";
	cout << "                      o¶¶¶¶¶¶v\n";
	cout << "                      o¶¶¶¶¶¶v\n";
	cout << "                    vo¶¶¶¶¶¶¶¶o\n";
	cout << "                    v¶¶¶¶¶¶¶¶¶o\n";
	cout << "                  v¶¶¶¶¶¶¶¶¶¶¶¶¶o\n";
	cout << "              o¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶v\n";
	cout << "              ¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶v\n";
	cout << "               o¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶o\n";
	SetColor(15, 0);
}

//Ïîäñ÷¸ò êîëëè÷åñòâà çàõâà÷åííîé òåğğèòîğèè ïåğâîãî è âòîğîãî èãğîêà
void result(int a, int** color)
{
	for (int i = 0; i < a; i++)
	{
		for (int j = 0; j < a; j++)
		{
			if (color[i][j] == 1)
			{
				green_sqr += 1;
			}
			else if (color[i][j] == 2)
			{
				red_sqr += 1;
			}
		}
	}

	if (green_sqr > red_sqr)
	{
		winner = userName_1;
	}
	else if (green_sqr < red_sqr)
	{
		winner = userName_2;
	}
	else if (green_sqr == red_sqr)
	{
		winner = "ÍÈ×Üß!!!";
	}
	priz(winner);
}

//Âûîä ïîëÿ âìåñòå ñ öèôğàìè ïî êğàÿì
void pole(int a, int** color)
{

	a++;
	int b = a;

	cout << " ";
	for (int i = 1; i < a; i++)
	{
		if (i <= 10)
		{
			cout << "   " << i;
		}
		else
		{
			cout << "  " << i;
		}
	}

	cout << endl;

	a = a * 2;
	int n = 1;

	for (int i = 0; i < a - 1; i++)
	{
		if (i % 2 == 0)
		{
			cout << "  ";
			for (int j = 0; j < b - 1; j++)
			{
				SetColor(5, 0);
				cout << " ===";
				SetColor(15, 0);
			}
			cout << endl;
		}
		else
		{
			if (n < 10)
			{
				cout << " " << n;
			}
			else
			{
				cout << n;
			}

			SetColor(5, 0);
			cout << "|";
			SetColor(15, 0);

			for (int j = 0; j < b - 1; j++)
			{
				if (color[i / 2][j] == 1)
				{
					SetColor(10, 10);
					cout << "xxx";
					SetColor(5, 0);
					cout << "|";
					SetColor(15, 0);
				}
				else if (color[i / 2][j] == 2)
				{
					SetColor(12, 12);
					cout << "xxx";
					SetColor(5, 0);
					cout << "|";
					SetColor(15, 0);
				}
				else
				{
					SetColor(5, 0);
					cout << "   |";
					SetColor(15, 0);
				}
			}
			if (n < 10)
			{
				cout << " " << n;
			}
			else
			{
				cout << n;
			}
			n++;

			cout << endl;
		}
	}

	cout << " ";
	for (int i = 1; i < a / 2; i++)
	{
		if (i <= 10)
		{
			cout << "   " << i;
		}
		else
		{
			cout << "  " << i;
		}
	}
	cout << "\n\n";
}

//Ãåíåğàöèÿ ÷èñëà äëÿ âûâîäà íà ıêğàí êîñòè
int step()
{
	int a, x = 0;

	Sleep(1000);

	a = rand() % 600 + 1;

	if (a > 0 and a < 101)
	{
		x = 1;
	}
	else if (a > 100 and a < 201)
	{
		x = 2;
	}
	else if (a > 200 and a < 301)
	{
		x = 3;
	}
	else if (a > 300 and a < 401)
	{
		x = 4;
	}
	else if (a > 400 and a < 501)
	{
		x = 5;
	}
	if (a > 500 and a < 601)
	{
		x = 6;
	}

	return x;
}

//Âûâîä íà ıêğàí êîñòè â ñîîòâåòñòâèè ñî ñãåíåğèğîâàííûì ÷èñëîì
void cube(int x)
{
	switch (x)
	{
	case 1:
		SetColor(4, 0);
		cout << "===========" << endl;
		cout << "|         |" << endl;
		cout << "|    ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "    |" << endl;
		cout << "|         |" << endl;
		cout << "===========\n" << endl;
		SetColor(15, 0);
		break;

	case 2:
		SetColor(4, 0);
		cout << "===========" << endl;
		cout << "|    ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "    |" << endl;
		cout << "|         |" << endl;
		cout << "|    ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "    |" << endl;
		cout << "===========\n" << endl;
		SetColor(15, 0);
		break;

	case 3:
		SetColor(4, 0);
		cout << "===========" << endl;
		cout << "|  ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "      |" << endl;
		cout << "|    ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "    |" << endl;
		cout << "|      ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "  |" << endl;
		cout << "===========\n" << endl;
		SetColor(15, 0);
		break;

	case 4:
		SetColor(4, 0);
		cout << "===========" << endl;
		cout << "|  ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "   ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "  |" << endl;
		cout << "|         |" << endl;
		cout << "|  ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "   ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "  |" << endl;
		cout << "===========\n" << endl;
		SetColor(15, 0);
		break;

	case 5:
		SetColor(4, 0);
		cout << "===========" << endl;
		cout << "|  ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "   ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "  |" << endl;
		cout << "|    ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "    |" << endl;
		cout << "|  ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "   ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "  |" << endl;
		cout << "===========\n" << endl;
		SetColor(15, 0);
		break;

	case 6:
		SetColor(4, 0);
		cout << "===========" << endl;
		cout << "|  ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "   ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "  |" << endl;
		cout << "|  ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "   ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "  |" << endl;
		cout << "|  ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "   ";
		SetColor(15, 0);
		cout << "*";
		SetColor(4, 0);
		cout << "  |" << endl;
		cout << "===========\n" << endl;
		SetColor(15, 0);
		break;
	}
	Sleep(1500);
}

//Ïğîòîòèï ôóíêöèè main äëÿ ïîâòîğíîãî âûçîâà
int main();

//Õîä ïåğâîãî èãğîêà
int user_1(int a, int** color)
{
	string choice = "Y";
	bool check = true;
	int corX, corY;
	int perX, perY;
	int temp = 0;

	//Çàïğîñ íà ïğîäîëæåíèå èãğû
	cout << "Ïğîäîëæèòü èãğó?(";
	SetColor(2, 0);
	cout << "Y";
	SetColor(15, 0);
	cout << "/";
	SetColor(4, 0);
	cout << "N";
	SetColor(15, 0);
	cout << ")\n-> ";
	cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

	system("cls");
	pole(a, color);

	if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
	{
		while (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
		{
			bool checkPlace = true;
			bool proverkaPlace = true;
			bool control = true;
			bool rerol = true;

			if (check)
			{
				//Âûâîä íà ıêğàí èìèòàöèè áğîñêà êóáèêîâ
				for (int i = 0; i < 2; i++)
				{
					if (i == 0)
					{
						cout << "Øèğèíà ïğÿìîóãîëüíèêà:\n\n";
						corX = step();
						cube(corX);
					}
					else if (i == 1)
					{
						cout << "Äëèííà ïğÿìîóãîëüíèêà:\n\n";
						corY = step();
						cube(corY);
					}
				}
			}
			check = true;

			system("cls");
			pole(a, color);

			while (checkPlace)
			{
				checkPlace = false;

				//Çàïğîñ íà âûáîğ êëåòêè
				SetColor(10, 0);
				cout << userName_1 << " õîäèò!\n";
				SetColor(15, 0);
				cout << "Øèğèíà: " << corX << endl;
				cout << "Äëèíà: " << corY << endl;
				cout << "Ââåäèòå êîîğäèíàòû òî÷êè (";
				SetColor(9, 0);
				cout << "Y";
				SetColor(15, 0);
				cout << ";";
				SetColor(9, 0);
				cout << "X";
				SetColor(15, 0);
				cout << ")" << endl;
				cin >> perX >> perY; //Ââîä êîîğäèíàò êëåòêè

				//Ïğîâåğêà íà íàëè÷èå òàêîé êîîğäèíàòû
				if (perX - 1 < a and perY - 1 < a)
				{
					for (int i = perX - 1; i <= (perX + corX - 2); i++)
					{
						for (int j = perY - 1; j <= (perY + corY - 2); j++)
						{
							//Ïğîâåğêà íà íåéòğàëüíîñòü âûáğàííîé êëåòêè â âåğõíåì ëåâîì óãëó
							if ((i == 0 and j == 0))
							{
								//Çàïğîñ íà ïğîäîëæåíèå èãğû
								system("cls");
								pole(a, color);
								cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
								cout << "Ïğîäîëæèòü èãğó?(";
								SetColor(2, 0);
								cout << "Y";
								SetColor(15, 0);
								cout << "/";
								SetColor(4, 0);
								cout << "N";
								SetColor(15, 0);
								cout << ")\n-> ";
								cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

								//Åñëè îòâåò îòğèöàòåëüíûé
								if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
								{
									result(a, color);
									SetColor(5, 0);
									cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
									SetColor(15, 0);

									//Çàïèñü ğåçóëüòàòîâ â ôàéë
									ofstream file;
									file.open("RESULT.txt");
									for (int i = 0; i < a; i++)
									{
										for (int j = 0; j < a; j++)
										{
											file << color[i][j] << " ";
										}
										file << endl;
									}
									file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
									file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
									file << endl << winner << " ïîáåäèë!";
									file.close();

									//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
									SetColor(5, 0);
									cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
									{
										//Îòêğûòèå ôàéëà
										system("notepad.exe RESULT.txt");
									}
									else
									{
										return 0;
									}

									//Çàïğîñ íà ïîâòîğ èãğû
									SetColor(15, 0);
									SetColor(5, 0);
									cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
									{
										main();
									}
									else
									{
										return 0;
									}
									return 0;
								}
								else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
								{
									system("cls");
									pole(a, color);
									cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

									checkPlace = false;
									control = false;
									rerol = false;
								}
								break;
							}
							//Ïğîâåğêà íà íåéòğàëüíîñòü âûáğàííîé êëåòêè ïî âåğõíåìó êğàş ïîëÿ
							else if (i == 0)
							{
								//Ïğîâåğêà ñîñåäíåé êëåòêè
								if (color[i][perY - 2] == 1)
								{
									if (color[i][j] == 1)
									{
										//Çàïğîñ íà ïğîäîëæåíèå èãğû
										system("cls");
										pole(a, color);
										cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
										cout << "Ïğîäîëæèòü èãğó?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
										{
											result(a, color);
											SetColor(5, 0);
											cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
											SetColor(15, 0);

											//Çàïèñü ğåçóëüòàòîâ â ôàéë
											ofstream file;
											file.open("RESULT.txt");
											for (int i = 0; i < a; i++)
											{
												for (int j = 0; j < a; j++)
												{
													file << color[i][j] << " ";
												}
												file << endl;
											}
											file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
											file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
											file << endl << winner << " ïîáåäèë!";
											file.close();

											//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
											SetColor(5, 0);
											cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
											SetColor(2, 0);
											cout << "Y";
											SetColor(15, 0);
											cout << "/";
											SetColor(4, 0);
											cout << "N";
											SetColor(15, 0);
											cout << ")\n-> ";
											cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

											if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
											{
												//Îòêğûòèå ôàéëà
												system("notepad.exe RESULT.txt");
											}
											else
											{
												return 0;
											}

											//Çàïğîñ íà ïîâòîğíóş èãğó
											SetColor(15, 0);
											SetColor(5, 0);
											cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
											SetColor(2, 0);
											cout << "Y";
											SetColor(15, 0);
											cout << "/";
											SetColor(4, 0);
											cout << "N";
											SetColor(15, 0);
											cout << ")\n-> ";
											cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

											if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
											{
												main();
											}
											else
											{
												return 0;
											}
											return 0;
										}
										else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											system("cls");
											pole(a, color);
											cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

											checkPlace = false;
											control = false;
											rerol = false;
										}
										break;
									}
								}
								else
								{
									//Çàïğîñ íà ïğîäîëæåíèå èãğû
									system("cls");
									pole(a, color);
									cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
									cout << "Ïğîäîëæèòü èãğó?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
									{
										result(a, color);
										SetColor(5, 0);
										cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
										SetColor(15, 0);

										//Çàïèñü ğåçóëüòàòîâ â ôàéë
										ofstream file;
										file.open("RESULT.txt");
										for (int i = 0; i < a; i++)
										{
											for (int j = 0; j < a; j++)
											{
												file << color[i][j] << " ";
											}
											file << endl;
										}
										file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
										file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
										file << endl << winner << " ïîáåäèë!";
										file.close();

										//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
										SetColor(5, 0);
										cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											//Îòêğûòèå ôàéëà
											system("notepad.exe RESULT.txt");
										}
										else
										{
											return 0;
										}

										//Çàïğîñ íà ïîâòîğ èãğû
										SetColor(15, 0);
										SetColor(5, 0);
										cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											main();
										}
										else
										{
											return 0;
										}
										return 0;
									}
									else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
									{
										system("cls");
										pole(a, color);
										cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

										checkPlace = false;
										control = false;
										rerol = false;
									}
									break;
								}
							}
							//Ïğîâåğêà íà íåéòğàëüíîñòü âûáğàííîé êëåòêè ïî ëåâîìó êğàş ïîëÿ
							else if (j == 0)
							{
								//Ïğîâåğêà ñîñåäíåé êëåòêè
								if (color[perX - 2][j] == 1)
								{
									if (color[i][j] == 1)
									{
										//Çàïğîñ íà ïğîäîëæåíèå èãğû
										system("cls");
										pole(a, color);
										cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
										cout << "Ïğîäîëæèòü èãğó?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
										{
											result(a, color);
											SetColor(5, 0);
											cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
											SetColor(15, 0);

											//Çàïèñü ğåçóëüòàòîâ â ôàéë
											ofstream file;
											file.open("RESULT.txt");
											for (int i = 0; i < a; i++)
											{
												for (int j = 0; j < a; j++)
												{
													file << color[i][j] << " ";
												}
												file << endl;
											}
											file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
											file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
											file << endl << winner << " ïîáåäèë!";
											file.close();

											//Çàïğîñ íà ïğîäîëæåíèå èãğû
											SetColor(5, 0);
											cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
											SetColor(2, 0);
											cout << "Y";
											SetColor(15, 0);
											cout << "/";
											SetColor(4, 0);
											cout << "N";
											SetColor(15, 0);
											cout << ")\n-> ";
											cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

											if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
											{
												//Îòêğûòèå ôàéëà
												system("notepad.exe RESULT.txt");
											}
											else
											{
												return 0;
											}

											//Çàïğîñ íà ïîâòîğ èãğû
											SetColor(15, 0);
											SetColor(5, 0);
											cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
											SetColor(2, 0);
											cout << "Y";
											SetColor(15, 0);
											cout << "/";
											SetColor(4, 0);
											cout << "N";
											SetColor(15, 0);
											cout << ")\n-> ";
											//Çàïğîñ íà ïğîäîëæåíèå èãğû

											if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
											{
												main();
											}
											else
											{
												return 0;
											}
											return 0;
										}
										else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											system("cls");
											pole(a, color);
											cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

											checkPlace = false;
											control = false;
											rerol = false;
										}
										break;
									}
								}
								else
								{
									//Çàïğîñ íà ïğîäîëæåíèå èãğû
									system("cls");
									pole(a, color);
									cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
									cout << "Ïğîäîëæèòü èãğó?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									checkPlace = false;
									control = false;
									rerol = false;

									break;
								}
							}
							else
							{
								if ((color[i][perY - 2] == 1 or color[perX - 2][j] == 1))
								{
									if (color[i][j] == 1)
									{
										//Çàïğîñ íà ïğîäîëæåíèå èãğû
										system("cls");
										pole(a, color);
										cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
										cout << "Ïğîäîëæèòü èãğó?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
										{
											result(a, color);
											SetColor(5, 0);
											cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
											SetColor(15, 0);

											//Çàïèñü ğåçóëüòàòîâ â ôàéë
											ofstream file;
											file.open("RESULT.txt");
											for (int i = 0; i < a; i++)
											{
												for (int j = 0; j < a; j++)
												{
													file << color[i][j] << " ";
												}
												file << endl;
											}
											file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
											file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
											file << endl << winner << " ïîáåäèë!";
											file.close();

											//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
											SetColor(5, 0);
											cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
											SetColor(2, 0);
											cout << "Y";
											SetColor(15, 0);
											cout << "/";
											SetColor(4, 0);
											cout << "N";
											SetColor(15, 0);
											cout << ")\n-> ";
											cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

											if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
											{
												//Îòêğûòèå ôàéëà
												system("notepad.exe RESULT.txt");
											}
											else
											{
												return 0;
											}

											//Çàïğîñ íà ïîâòîğ èãğû
											SetColor(15, 0);
											SetColor(5, 0);
											cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
											SetColor(2, 0);
											cout << "Y";
											SetColor(15, 0);
											cout << "/";
											SetColor(4, 0);
											cout << "N";
											SetColor(15, 0);
											cout << ")\n-> ";
											cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

											if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
											{
												main();
											}
											else
											{
												return 0;
											}
											return 0;
										}
										else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											system("cls");
											pole(a, color);
											cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

											checkPlace = true;
											control = false;
											rerol = false;
										}
									}
								}
								//Ïğîâåğêà íà íåéòğàëüíîñòü âûáğàííîé êëåòêè âî âñ¸ì ïîëå, íî ñ îòñòóïîì â îäíó êëåòêó îò êğàÿ
								else if (color[i][perY - 2] != 1 or color[perX - 2][j] != 1)
								{
									//Çàïğîñ íà ïğîäîëæåíèå èãğû
									system("cls");
									pole(a, color);
									cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
									cout << "Ïğîäîëæèòü èãğó?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
									{
										result(a, color);
										SetColor(5, 0);
										cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
										SetColor(15, 0);

										//Çàïèñü ğåçóëüòàòîâ â ôàéë
										ofstream file;
										file.open("RESULT.txt");
										for (int i = 0; i < a; i++)
										{
											for (int j = 0; j < a; j++)
											{
												file << color[i][j] << " ";
											}
											file << endl;
										}
										file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
										file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
										file << endl << winner << " ïîáåäèë!";
										file.close();

										//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
										SetColor(5, 0);
										cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											//Îòêğûòèå ôàéëà
											system("notepad.exe RESULT.txt");
										}
										else
										{
											return 0;
										}

										//Çàïğîñ íà ïîâòîğ èãğû
										SetColor(15, 0);
										SetColor(5, 0);
										cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											main();
										}
										else
										{
											return 0;
										}
										return 0;
									}
									else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
									{
										system("cls");
										pole(a, color);
										cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

										checkPlace = true;
										control = false;
										rerol = false;
									}
								}
							}
							if (checkPlace == false)
							{
								//Åñëè ïëîùàäü ïğÿìîóãîëüíèêà ïîìåùàåòñÿ â ïîëå
								if ((a > corX + perX - 2) and (a > corY + perY - 2))
								{
									//Ïğîâåğêà íà íåéòğàëüíîñòü êëåòîê â ïëîùàäè ïğÿìîóãîëüíèêà
									for (int i = perX - 1; i <= (perX + corX - 2); i++)
									{
										for (int j = perY - 1; j <= (perY + corY - 2); j++)
										{
											if (color[i][j] == 1 or color[i][j] == 2)
											{
												proverkaPlace = false;
												rerol = false;
											}
										}
									}
									if (proverkaPlace == true)
									{
										//Çàêğàñêà âûáğàííîé òåğğèòîğèè
										for (int i = perX - 1; i <= (perX + corX - 2); i++)
										{
											for (int j = perY - 1; j <= (perY + corY - 2); j++)
											{
												if (corX > a - perX + 1 or corY > a - perY + 1)
												{
													checkPlace = true;
													rerol = false;
													break;
												}
												else
												{
													color[i][j] = 1;
													control = false;
												}
											}
										}
									}
								}
							}
							if (control)
							{
								checkPlace = true;
								proverkaPlace = true;

								//Çàïğîñ íà ïğîäîëæåíèå èãğû
								system("cls");
								pole(a, color);
								cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
								cout << "Ïğîäîëæèòü èãğó?(";
								SetColor(2, 0);
								cout << "Y";
								SetColor(15, 0);
								cout << "/";
								SetColor(4, 0);
								cout << "N";
								SetColor(15, 0);
								cout << ")\n-> ";
								cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

								if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
								{
									result(a, color);
									SetColor(5, 0);
									cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
									SetColor(15, 0);

									//Çàïèñü ğåçóëüòàòîâ â ôàéë
									ofstream file;
									file.open("RESULT.txt");
									for (int i = 0; i < a; i++)
									{
										for (int j = 0; j < a; j++)
										{
											file << color[i][j] << " ";
										}
										file << endl;
									}
									file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
									file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
									file << endl << winner << " ïîáåäèë!";
									file.close();

									//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
									SetColor(5, 0);
									cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
									{
										//Îòêğûòèå ôàéëà
										system("notepad.exe RESULT.txt");
									}
									else
									{
										return 0;
									}

									//Çàïğîñ íà ïîâòîğ èãğû
									SetColor(15, 0);
									SetColor(5, 0);
									cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
									{
										main();
									}
									else
									{
										return 0;
									}
									return 0;
								}
								else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
								{
									system("cls");
									pole(a, color);
									cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

									checkPlace = true;
									rerol = false;
								}
								break;
							}
							else
							{
								system("cls");
								pole(a, color);

								checkPlace = true;
								break;
							}
						}
						break;
					}
					break;
				}
				else
				{
					system("cls");
					pole(a, color);

					checkPlace = true;
					check = false;

					cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
				}
			}

			//Ïğîâåğêà íà êîëëè÷åñòâî áğîñêîâ êîñòåé
			if (temp < 3)
			{
				if (rerol == false)
				{
					//Çàïğîñ íà ïîâòîğíûé áğîñîê êóáèêîâ
					system("cls");
					pole(a, color);
					cout << "Áğîñèòü êóáèêè?(";
					SetColor(2, 0);
					cout << "Y";
					SetColor(15, 0);
					cout << "/";
					SetColor(4, 0);
					cout << "N";
					SetColor(15, 0);
					cout << ")\n-> ";
					cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

					if ((choice == "N" or choice == "n" or choice == "Ò" or choice == "ò") and rerol == false)
					{
						choice = "Y";
						check = false;
					}
					else if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
					{
						return 0;
					}
					else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
					{
						if (rerol == false)
						{
							checkPlace = true;
							temp += 1;
						}
						else
						{
							checkPlace = true;
						}
					}
				}
				else
				{
					return 1;
				}
			}
			else
			{
				checkPlace = false;
				per1 = true;

				system("cls");
				pole(a, color);
				SetColor(5, 0);
				cout << "Ïîïûòêè èñ÷åğïàíû! :)\nÕîä ïåğåõîäèò èãğîêó " << userName_2 << endl;
				SetColor(15, 0);

				return 1;
			}
		}
	}
	else if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
	{
		result(a, color);
		SetColor(5, 0);
		cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
		SetColor(15, 0);

		//Çàïèñü ğåçóëüòàòîâ â ôàéë
		ofstream file;
		file.open("RESULT.txt");
		for (int i = 0; i < a; i++)
		{
			for (int j = 0; j < a; j++)
			{
				file << color[i][j] << " ";
			}
			file << endl;
		}
		file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
		file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
		file << endl << winner << " ïîáåäèë!";
		file.close();

		//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
		SetColor(5, 0);
		cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
		SetColor(2, 0);
		cout << "Y";
		SetColor(15, 0);
		cout << "/";
		SetColor(4, 0);
		cout << "N";
		SetColor(15, 0);
		cout << ")\n-> ";
		cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

		if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
		{
			//Îòêğûòèå ôàéëà
			system("notepad.exe RESULT.txt");
		}


		//Çàïğîñ íà ïîâòîğ èãğû
		SetColor(15, 0);
		SetColor(5, 0);
		cout << "\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
		SetColor(2, 0);
		cout << "Y";
		SetColor(15, 0);
		cout << "/";
		SetColor(4, 0);
		cout << "N";
		SetColor(15, 0);
		cout << ")\n-> ";
		cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

		if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
		{
			main();
		}
		else
		{
			return 0;
		}
	}
	else
	{
		user_1(a, color);
	}
}

//Õîä âòîğîãî èãğîêà
int user_2(int a, int** color)
{
	string choice = "Y";
	bool first = true;
	bool check = true;
	int corX, corY;
	int perX, perY;
	int temp = 0;

	//Çàïğîñ íà ïğîäîëæåíèå èãğû
	cout << "Ïğîäîëæèòü èãğó?(";
	SetColor(2, 0);
	cout << "Y";
	SetColor(15, 0);
	cout << "/";
	SetColor(4, 0);
	cout << "N";
	SetColor(15, 0);
	cout << ")\n-> ";
	cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

	system("cls");
	pole(a, color);

	if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
	{
		while (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
		{
			bool checkPlace = true;
			bool proverkaPlace = true;
			bool control = true;
			bool rerol = true;

			if (check)
			{
				for (int i = 0; i < 2; i++)
				{
					if (i == 0)
					{
						cout << "Øèğèíà ïğÿìîóãîëüíèêà:\n\n";
						corX = step();
						cube(corX);
					}
					else if (i == 1)
					{
						cout << "Äëèííà ïğÿìîóãîëüíèêà:\n\n";
						corY = step();
						cube(corY);
					}
				}
			}

			check = true;
			system("cls");
			pole(a, color);

			while (checkPlace)
			{
				checkPlace = false;
				SetColor(12, 0);
				cout << userName_2 << " õîäèò!\n";
				SetColor(15, 0);
				cout << "Øèğèíà: " << corX << endl;
				cout << "Äëèíà: " << corY << endl;
				cout << "Ââåäèòå êîîğäèíàòû òî÷êè (";
				SetColor(9, 0);
				cout << "Y";
				SetColor(15, 0);
				cout << ";";
				SetColor(9, 0);
				cout << "X";
				SetColor(15, 0);
				cout << ")" << endl;
				cin >> perX >> perY; //Ââîä êîîğäèíàò êëåòêè

				if (perX - 1 < a and perY - 1 < a)
				{
					for (int i = perX - 1; i <= (perX + corX - 2); i++)
					{
						for (int j = perY - 1; j <= (perY + corY - 2); j++)
						{
							//Ïğîâåğêà íà íåéòğàëüíîñòü âûáğàííîé êëåòêè â íèæíåì ïğàâîì óãëó
							if ((i == a - 1 and j == a - 1))
							{
								//Çàïğîñ íà ïğîäîëæåíèå èãğû
								system("cls");
								pole(a, color);
								cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
								cout << "Ïğîäîëæèòü èãğó?(";
								SetColor(2, 0);
								cout << "Y";
								SetColor(15, 0);
								cout << "/";
								SetColor(4, 0);
								cout << "N";
								SetColor(15, 0);
								cout << ")\n-> ";
								cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

								if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
								{
									result(a, color);
									SetColor(5, 0);
									cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
									SetColor(15, 0);

									//Çàïèñü ğåçóëüòàòîâ â ôàéë
									ofstream file;
									file.open("RESULT.txt");
									for (int i = 0; i < a; i++)
									{
										for (int j = 0; j < a; j++)
										{
											file << color[i][j] << " ";
										}
										file << endl;
									}
									file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
									file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
									file << endl << winner << " ïîáåäèë!";
									file.close();

									//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
									SetColor(5, 0);
									cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
									{
										//Îòêğûòèå ôàéëà
										system("notepad.exe RESULT.txt");
									}
									else
									{
										return 0;
									}

									//Çàïğîñ íà ïîâòîğ èãğû
									SetColor(15, 0);
									SetColor(5, 0);
									cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
									{
										main();
									}
									else
									{
										return 0;
									}
									return 0;
								}
								else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
								{
									system("cls");
									pole(a, color);
									cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

									checkPlace = false;
									control = false;
									rerol = false;
								}
								break;
							}
							//Ïğîâåğêà íà íåéòğàëüíîñòü âûáğàííîé êëåòêè îêîëî íèæíåãî êğàÿ ïîëÿ
							else if (i == a - 1)
							{
								//Ïğîâåğêà ñîñåäíåé êëåòêè
								if (color[i][perY] == 2)
								{
									if (color[i][j] == 2)
									{
										//Çàïğîñ íà ïğîäîëæåíèå èãğû
										system("cls");
										pole(a, color);
										cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
										cout << "Ïğîäîëæèòü èãğó?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
										{
											result(a, color);
											SetColor(5, 0);
											cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
											SetColor(15, 0);

											//Çàïèñü ğåçóëüòàòîâ â ôàéë
											ofstream file;
											file.open("RESULT.txt");
											for (int i = 0; i < a; i++)
											{
												for (int j = 0; j < a; j++)
												{
													file << color[i][j] << " ";
												}
												file << endl;
											}
											file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
											file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
											file << endl << winner << " ïîáåäèë!";
											file.close();

											//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
											SetColor(5, 0);
											cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
											SetColor(2, 0);
											cout << "Y";
											SetColor(15, 0);
											cout << "/";
											SetColor(4, 0);
											cout << "N";
											SetColor(15, 0);
											cout << ")\n-> ";
											cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

											if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
											{
												//Îòêğûòèå ôàéëà
												system("notepad.exe RESULT.txt");
											}
											else
											{
												return 0;
											}

											//Çàïğîñ íà ïîâòîğ èãğû
											SetColor(15, 0);
											SetColor(5, 0);
											cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
											SetColor(2, 0);
											cout << "Y";
											SetColor(15, 0);
											cout << "/";
											SetColor(4, 0);
											cout << "N";
											SetColor(15, 0);
											cout << ")\n-> ";
											cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

											if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
											{
												main();
											}
											else
											{
												return 0;
											}
											return 0;
										}
										else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											system("cls");
											pole(a, color);
											cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

											checkPlace = false;
											control = false;
											rerol = false;
										}
										break;
									}
								}
								else
								{
									//Çàïğîñ íà ïğîäîëæåíèå èãğû
									system("cls");
									pole(a, color);
									cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
									cout << "Ïğîäîëæèòü èãğó?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
									{
										result(a, color);
										SetColor(5, 0);
										cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
										SetColor(15, 0);

										//Çàïèñü ğåçóëüòàòîâ â ôàéë
										ofstream file;
										file.open("RESULT.txt");
										for (int i = 0; i < a; i++)
										{
											for (int j = 0; j < a; j++)
											{
												file << color[i][j] << " ";
											}
											file << endl;
										}
										file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
										file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
										file << endl << winner << " ïîáåäèë!";
										file.close();

										//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
										SetColor(5, 0);
										cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											//Îòêğûòèå ôàéëà
											system("notepad.exe RESULT.txt");
										}
										else
										{
											return 0;
										}

										//Çàïğîñ íà ïîâòîğ èãğû
										SetColor(15, 0);
										SetColor(5, 0);
										cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											main();
										}
										else
										{
											return 0;
										}
										return 0;
									}
									else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
									{
										system("cls");
										pole(a, color);
										cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

										checkPlace = false;
										control = false;
										rerol = false;
									}
									break;
								}
							}
							//Ïğîâåğêà íà íåéòğàëüíîñòü âûáğàííîé êëåòêè ñïğàâîãî êğàÿ ïîëÿ
							else if (j == a - 2)
							{
								//Ïğîâåğêà ñîñåäíåé êëåòêè
								if (color[perX][j] == 2)
								{
									if (color[i][j] == 2)
									{
										//Çàïğîñ íà ïğîäîëæåíèå èãğû
										system("cls");
										pole(a, color);
										cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
										cout << "Ïğîäîëæèòü èãğó?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
										{
											result(a, color);
											SetColor(5, 0);
											cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
											SetColor(15, 0);

											//Çàïèñü ğåçóëüòàòîâ â ôàéë
											ofstream file;
											file.open("RESULT.txt");
											for (int i = 0; i < a; i++)
											{
												for (int j = 0; j < a; j++)
												{
													file << color[i][j] << " ";
												}
												file << endl;
											}
											file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
											file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
											file << endl << winner << " ïîáåäèë!";
											file.close();

											//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
											SetColor(5, 0);
											cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
											SetColor(2, 0);
											cout << "Y";
											SetColor(15, 0);
											cout << "/";
											SetColor(4, 0);
											cout << "N";
											SetColor(15, 0);
											cout << ")\n-> ";
											cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

											if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
											{
												//Îòêğûòèå ôàéëà
												system("notepad.exe RESULT.txt");
											}
											else
											{
												return 0;
											}

											//Çàïğîñ íà ïîâòîğ èãğû
											SetColor(15, 0);
											SetColor(5, 0);
											cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
											SetColor(2, 0);
											cout << "Y";
											SetColor(15, 0);
											cout << "/";
											SetColor(4, 0);
											cout << "N";
											SetColor(15, 0);
											cout << ")\n-> ";
											cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

											if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
											{
												main();
											}
											else
											{
												return 0;
											}
											return 0;
										}
										else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											system("cls");
											pole(a, color);
											cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

											checkPlace = false;
											control = false;
											rerol = false;
										}
										break;
									}
								}
								else
								{
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ
									system("cls");
									pole(a, color);
									cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
									cout << "Ïğîäîëæèòü èãğó?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									checkPlace = false;
									control = false;
									rerol = false;

									break;
								}
							}
							else
							{
								if ((color[i][perY] == 2 or color[perX][j] == 2))
								{
									if (color[i][j] == 2)
									{
										//Çàïğîñ íà ïğîäîëæåíèå èãğû
										system("cls");
										pole(a, color);
										cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
										cout << "Ïğîäîëæèòü èãğó?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
										{
											result(a, color);
											SetColor(5, 0);
											cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
											SetColor(15, 0);

											//Çàïèñü ğåçóëüòàòîâ â ôàéë
											ofstream file;
											file.open("RESULT.txt");
											for (int i = 0; i < a; i++)
											{
												for (int j = 0; j < a; j++)
												{
													file << color[i][j] << " ";
												}
												file << endl;
											}
											file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
											file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
											file << endl << winner << " ïîáåäèë!";
											file.close();

											//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
											SetColor(5, 0);
											cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
											SetColor(2, 0);
											cout << "Y";
											SetColor(15, 0);
											cout << "/";
											SetColor(4, 0);
											cout << "N";
											SetColor(15, 0);
											cout << ")\n-> ";
											cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

											if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
											{
												//Îòêğûòèå ôàéëà
												system("notepad.exe RESULT.txt");
											}
											else
											{
												return 0;
											}

											//Çàïğîñ íà ïîâòîğ èãğû
											SetColor(15, 0);
											SetColor(5, 0);
											cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
											SetColor(2, 0);
											cout << "Y";
											SetColor(15, 0);
											cout << "/";
											SetColor(4, 0);
											cout << "N";
											SetColor(15, 0);
											cout << ")\n-> ";
											cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

											if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
											{
												main();
											}
											else
											{
												return 0;
											}
											return 0;
										}
										else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											system("cls");
											pole(a, color);
											cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

											checkPlace = true;
											control = false;
											rerol = false;
										}
									}
								}
								//Ïğîâåğêà ñîñåäíåé êëåòêè
								else if (color[i][perY + 2] != 2 or color[perX + 2][j] != 2)
								{
									//Çàïğîñ íà ïğîäîëæåíèå èãğû
									system("cls");
									pole(a, color);
									cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
									cout << "Ïğîäîëæèòü èãğó?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
									{
										result(a, color);
										SetColor(5, 0);
										cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
										SetColor(15, 0);

										//Çàïèñü ğåçóëüòàòîâ â ôàéë
										ofstream file;
										file.open("RESULT.txt");
										for (int i = 0; i < a; i++)
										{
											for (int j = 0; j < a; j++)
											{
												file << color[i][j] << " ";
											}
											file << endl;
										}
										file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
										file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
										file << endl << winner << " ïîáåäèë!";
										file.close();

										//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
										SetColor(5, 0);
										cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											//Îòêğûòèå ôàéëà
											system("notepad.exe RESULT.txt");
										}
										else
										{
											return 0;
										}

										//Çàïğîñ íà ïîâòîğ èãğû
										SetColor(15, 0);
										SetColor(5, 0);
										cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
										SetColor(2, 0);
										cout << "Y";
										SetColor(15, 0);
										cout << "/";
										SetColor(4, 0);
										cout << "N";
										SetColor(15, 0);
										cout << ")\n-> ";
										cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

										if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
										{
											main();

										}
										else
										{
											return 0;
										}
										return 0;
									}
									else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
									{
										system("cls");
										pole(a, color);
										cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

										checkPlace = true;
										control = false;
										rerol = false;
									}
								}
							}
							if (checkPlace == false)
							{
								//Ïğîâåğêà âõîäèò ëè ïğÿìîóãîëüíèê â ïğåäåëû ïîëÿ
								if ((a - (a - perX) >= corX) and (a - (a - perY) >= corY))
								{
									//Ïğîâåğêà ïëîùàäè ïğÿìîóãîëüíèêà íà íàëè÷èå íå íåéòğàëüíûõ êëåòîê
									for (int i = perX - 1; i >= perX - corX; i--)
									{
										for (int j = perY - 1; j >= perY - corY; j--)
										{
											if (color[i][j] == 1 or color[i][j] == 2)
											{
												proverkaPlace = false;
												rerol = false;
											}
										}
									}
									if (proverkaPlace == true)
									{
										//Çàêğàñêà ïğÿìîóãîëüíèêà
										for (int i = perX - 1; i >= perX - corX; i--)
										{
											for (int j = perY - 1; j >= perY - corY; j--)
											{
												//Âõîäèò ëè ïğÿìîóãîëüíèê â ïğåäåëû ïîëÿ
												if ((a - (a - perX) <= corX) and (a - (a - perY) <= corY))
												{
													checkPlace = true;
													rerol = false;
													break;
												}
												else
												{
													color[i][j] = 2;
													control = false;
												}
											}
										}
									}
								}
							}
							if (control)
							{
								checkPlace = true;
								proverkaPlace = true;

								//Çàïğîñ íà ïğîäîëæåíèå èãğû
								system("cls");
								pole(a, color);
								cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;
								cout << "Ïğîäîëæèòü èãğó?(";
								SetColor(2, 0);
								cout << "Y";
								SetColor(15, 0);
								cout << "/";
								SetColor(4, 0);
								cout << "N";
								SetColor(15, 0);
								cout << ")\n-> ";
								cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

								if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
								{
									result(a, color);
									SetColor(5, 0);
									cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
									SetColor(15, 0);

									//Çàïèñü ğåçóëüòàòîâ â ôàéë
									ofstream file;
									file.open("RESULT.txt");
									for (int i = 0; i < a; i++)
									{
										for (int j = 0; j < a; j++)
										{
											file << color[i][j] << " ";
										}
										file << endl;
									}
									file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
									file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
									file << endl << winner << " ïîáåäèë!";
									file.close();

									//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
									SetColor(5, 0);
									cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
									{
										//Îòêğûòèå ôàéëà
										system("notepad.exe RESULT.txt");
									}
									else
									{
										return 0;
									}

									//Çàïğîñ íà ïîâòîğ èãğû
									SetColor(15, 0);
									SetColor(5, 0);
									cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
									SetColor(2, 0);
									cout << "Y";
									SetColor(15, 0);
									cout << "/";
									SetColor(4, 0);
									cout << "N";
									SetColor(15, 0);
									cout << ")\n-> ";
									cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

									if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
									{
										main();
									}
									else
									{
										return 0;
									}
									return 0;
								}
								else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
								{
									system("cls");
									pole(a, color);
									cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

									checkPlace = true;
									rerol = false;
								}
								break;
							}
							else
							{
								system("cls");
								pole(a, color);

								checkPlace = true;

								break;
							}
						}
						break;
					}
					break;
				}
				else
				{
					system("cls");
					pole(a, color);
					cout << "Ââåäåíû íå ïğàâèëüíûå êîîğäèíàòû, âàì ñòîèò ïğî÷èòàòü ïğàâèëà èãğû" << endl;

					check = false;
					checkPlace = true;
				}
			}
			if (temp < 3)
			{
				if (rerol == false)
				{
					//Çàïğîñ íà ïîâòîğíûé áğîñîê êóáèêîâ
					system("cls");
					pole(a, color);
					cout << "Áğîñèòü êóáèêè?(";
					SetColor(2, 0);
					cout << "Y";
					SetColor(15, 0);
					cout << "/";
					SetColor(4, 0);
					cout << "N";
					SetColor(15, 0);
					cout << ")\n-> ";
					cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

					if ((choice == "N" or choice == "n" or choice == "Ò" or choice == "ò") and rerol == false)
					{
						choice = "Y";
						check = false;
					}
					else if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
					{
						return 0;
					}
					else if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
					{
						if (rerol == false)
						{
							checkPlace = true;
							temp += 1;
						}
						else
						{
							checkPlace = true;
						}
					}
				}
				else
				{
					return 1;
				}
			}
			else
			{
				checkPlace = false;
				per2 = true;

				system("cls");
				pole(a, color);
				SetColor(5, 0);
				cout << "Ïîïûòêè èñ÷åğïàíû! :)\nÕîä ïåğåõîäèò èãğîêó " << userName_1 << endl;
				SetColor(15, 0);

				return 1;
			}
		}
	}
	else if (choice == "N" or choice == "n" or choice == "Ò" or choice == "ò")
	{
		result(a, color);
		SetColor(5, 0);
		cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
		SetColor(15, 0);

		//Çàïèñü ğåçóëüòàòîâ â ôàéë
		ofstream file;
		file.open("RESULT.txt");
		for (int i = 0; i < a; i++)
		{
			for (int j = 0; j < a; j++)
			{
				file << color[i][j] << " ";
			}
			file << endl;
		}
		file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
		file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
		file << endl << winner << " ïîáåäèë!";
		file.close();

		//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
		SetColor(5, 0);
		cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
		SetColor(2, 0);
		cout << "Y";
		SetColor(15, 0);
		cout << "/";
		SetColor(4, 0);
		cout << "N";
		SetColor(15, 0);
		cout << ")\n-> ";
		cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

		if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
		{
			//Îòêğûòèå ôàéëà
			system("notepad.exe RESULT.txt");
		}

		//Çàïğîñ íà ïîâòîğ èãğû
		SetColor(15, 0);
		SetColor(5, 0);
		cout << "\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
		SetColor(2, 0);
		cout << "Y";
		SetColor(15, 0);
		cout << "/";
		SetColor(4, 0);
		cout << "N";
		SetColor(15, 0);
		cout << ")\n-> ";
		cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

		if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
		{
			main();
		}
		else
		{
			return 0;
		}
	}
	else
	{
		user_2(a, color);
	}
}

//Ãëàâíàÿ ôóíêöèÿ
int main()
{
	SetConsoleCP(1251);
	SetConsoleOutputCP(1251);
	srand(time(NULL));

	int a;
	int choise = 0;
	bool proverka = true;
	bool size = true;
	bool game = true;

	while (proverka)
	{
		//Âûâîä ìåíş
		system("cls");
		SetColor(9, 0);
		cout << "	Ïğÿìîóãîëüíèêè: çàõâàò òåğğèòîğèé\n";
		SetColor(15, 0);
		cout << "1. Íà÷àòü èãğó\n2. Ïğàâèëà èãğû\n3. Âûõîä\n";
		cout << "-> ";
		cin >> choise; //Îòâåò ïîëüçîâàòåëÿ

		if (!cin)
		{
			cin.clear();
			while (cin.get() != '\n');
		}
		else if (choise > 0 and choise < 4)
		{
			if (choise == 1)
			{
				//Çàïğîñ èì¸í ïîëüçîâàòåëåé
				system("cls");
				SetColor(5, 0);
				cout << "Ââåäèòå èìÿ ïåğâîãî èãğîêà(áåç ïğîáåëà)\n";
				SetColor(10, 0);
				cout << "->";
				SetColor(15, 0);
				cin >> userName_1;
				SetColor(5, 0);
				cout << "Ââåäèòå èìÿ âòîğîãî èãğîêà(áåç ïğîáåëà)\n";
				SetColor(12, 0);
				cout << "->";
				SetColor(15, 0);
				cin >> userName_2;

				while (size)
				{
					//Çàïğîñ ğàçìåğíîñòè ïîëÿ
					system("cls");
					SetColor(5, 0);
					cout << userName_1 << " è " << userName_2 << ", ïğèâåòñòâóş âàñ â èãğå!\n";
					cout << "Ââåäèòå ñòîğîíó êâàäğàòíîãî ïîëÿ îò 12 äî 30: ";
					SetColor(15, 0);
					cin >> a;

					if (!cin)
					{
						cin.clear();
						while (cin.get() != '\n');
					}
					else
					{
						if (a >= 12 and a <= 30)
						{
							size = false;
						}
						else
						{
							system("cls");
							SetColor(5, 0);
							cout << "Ââåäåíû íå âåğíûå êîîğäèíàòû, ïîïğîáóéòå åù¸ ğàç :)\n";
							SetColor(5, 0);
							system("pause");
						}
					}
				}

				system("cls");

				int x, y;
				int** color = new int* [a];

				for (int i = 0; i < a; i++)
				{
					color[i] = new int[a];
				}
				for (int i = 0; i < a; i++)
				{
					for (int j = 0; j < a; j++)
					{
						color[i][j] = 0;
					}
				}

				string choice = "Y";
				int corX, corY;
				int perX, perY;

				system("cls");
				pole(a, color);

				for (int i = 0; i < 2; i++)
				{
					if (i == 0)
					{
						cout << "Øèğèíà ïğÿìîóãîëüíèêà:\n\n";
						corX = step();
						cube(corX);
					}
					else if (i == 1)
					{
						cout << "Äëèííà ïğÿìîóãîëüíèêà:\n\n";
						corY = step();
						cube(corY);
					}
				}
				for (int i = 0; i < corX; i++)
				{
					for (int j = 0; j < corY; j++)
					{
						color[i][j] = 1;
					}
				}

				system("cls");
				pole(a, color);

				for (int i = 0; i < 2; i++)
				{
					if (i == 0)
					{
						cout << "Øèğèíà ïğÿìîóãîëüíèêà:\n\n";
						corX = step();
						cube(corX);
					}
					else if (i == 1)
					{
						cout << "Äëèííà ïğÿìîóãîëüíèêà:\n\n";
						corY = step();
						cube(corY);
					}
				}
				for (int i = a - 1; i >= a - corX; i--)
				{
					for (int j = a - 1; j >= a - corY; j--)
					{
						color[i][j] = 2;
					}
				}

				system("cls");
				pole(a, color);

				while (game)
				{
					if (per1 && per2)
					{
						result(a, color);
						SetColor(5, 0);
						cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
						SetColor(15, 0);

						//Çàïèñü ğåçóëüòàòîâ â ôàéë
						ofstream file;
						file.open("RESULT.txt");
						for (int i = 0; i < a; i++)
						{
							for (int j = 0; j < a; j++)
							{
								file << color[i][j] << " ";
							}
							file << endl;
						}
						file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
						file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
						file << endl << winner << " ïîáåäèë!";
						file.close();

						//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
						SetColor(5, 0);
						cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
						SetColor(2, 0);
						cout << "Y";
						SetColor(15, 0);
						cout << "/";
						SetColor(4, 0);
						cout << "N";
						SetColor(15, 0);
						cout << ")\n-> ";
						cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

						if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
						{
							//Îòêğûòèå ôàéëà
							system("notepad.exe RESULT.txt");
						}
						else
						{
							return 0;
						}

						//Çàïğîñ íà ïîâòîğ èãğû
						SetColor(15, 0);
						SetColor(5, 0);
						cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
						SetColor(2, 0);
						cout << "Y";
						SetColor(15, 0);
						cout << "/";
						SetColor(4, 0);
						cout << "N";
						SetColor(15, 0);
						cout << ")\n-> ";
						cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

						if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
						{
							main();
						}
						else
						{
							return 0;
						}
						return 0;
					}

					int temp = 0;

					if (user_1(a, color) == 0)
					{
						return 0;
					}

					//Ïğîâåğêà íà íàëè÷èå íåéòğàëüíûõ êëåòîê
					for (int i = 0; i < a - 1; i++)
					{
						for (int j = 0; j < a - 1; j++)
						{
							if (color[i][j] == 1)
							{
								temp += 1;
							}
						}
					}
					if (temp == 0)
					{
						result(a, color);
						SetColor(5, 0);
						cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
						SetColor(15, 0);

						//Çàïèñü ğåçóëüòàòîâ â ôàéë
						ofstream file;
						file.open("RESULT.txt");
						for (int i = 0; i < a; i++)
						{
							for (int j = 0; j < a; j++)
							{
								file << color[i][j] << " ";
							}
							file << endl;
						}
						file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
						file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
						file << endl << winner << " ïîáåäèë!";
						file.close();

						//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
						SetColor(5, 0);
						cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
						SetColor(2, 0);
						cout << "Y";
						SetColor(15, 0);
						cout << "/";
						SetColor(4, 0);
						cout << "N";
						SetColor(15, 0);
						cout << ")\n-> ";
						cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

						if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
						{
							//Îòêğûòèå ôàéëà
							system("notepad.exe RESULT.txt");
						}
						else
						{
							return 0;
						}

						//Çàïğîñ íà ïîâòîğ èãğû
						SetColor(15, 0);
						SetColor(5, 0);
						cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
						SetColor(2, 0);
						cout << "Y";
						SetColor(15, 0);
						cout << "/";
						SetColor(4, 0);
						cout << "N";
						SetColor(15, 0);
						cout << ")\n-> ";
						cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

						if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
						{
							main();
						}
						else
						{
							return 0;
						}
						return 0;
					}
					if (per1 && per2)
					{
						result(a, color);
						SetColor(5, 0);
						cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
						SetColor(15, 0);

						//Çàïèñü ğåçóëüòàòîâ â ôàéë
						ofstream file;
						file.open("RESULT.txt");
						for (int i = 0; i < a; i++)
						{
							for (int j = 0; j < a; j++)
							{
								file << color[i][j] << " ";
							}
							file << endl;
						}
						file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
						file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
						file << endl << winner << " ïîáåäèë!";
						file.close();

						//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
						SetColor(5, 0);
						cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
						SetColor(2, 0);
						cout << "Y";
						SetColor(15, 0);
						cout << "/";
						SetColor(4, 0);
						cout << "N";
						SetColor(15, 0);
						cout << ")\n-> ";
						cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

						if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
						{
							//Îòêğûòèå ôàéëà
							system("notepad.exe RESULT.txt");
						}
						else
						{
							return 0;
						}

						//Çàïğîñ íà ïîâòîğ èãğû
						SetColor(15, 0);
						SetColor(5, 0);
						cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
						SetColor(2, 0);
						cout << "Y";
						SetColor(15, 0);
						cout << "/";
						SetColor(4, 0);
						cout << "N";
						SetColor(15, 0);
						cout << ")\n-> ";
						cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

						if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
						{
							main();
						}
						else
						{
							return 0;
						}
						return 0;
					}

					if (user_2(a, color) == 0)
					{
						return 0;
					}

					//Ïğîâåğêà íà íàëè÷èå íåéòğàëüíûõ êëåòîê
					for (int i = 0; i < a - 1; i++)
					{
						for (int j = 0; j < a - 1; j++)
						{
							if (color[i][j] == 1)
							{
								temp += 1;
							}
						}
					}
					//Åñëè çàêğàøåíû âñå íåéòğàëüíûå êëåòêè
					if (temp == 0)
					{
						result(a, color);
						SetColor(5, 0);
						cout << "\n	Ğåçóëüòàòû ìîæíî ïîñìîòğåòü â òåêñòîâîì ôàéëå ïğîãğàììû!\n";
						SetColor(15, 0);

						//Çàïèñü ğåçóëüòàòîâ â ôàéë
						ofstream file;
						file.open("RESULT.txt");
						for (int i = 0; i < a; i++)
						{
							for (int j = 0; j < a; j++)
							{
								file << color[i][j] << " ";
							}
							file << endl;
						}
						file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_1 << " " << green_sqr;
						file << endl << "×èñëî çàâî¸âàííûõ êëåòîê èãğîêà: " << userName_2 << " " << red_sqr << endl;
						file << endl << winner << " ïîáåäèë!";
						file.close();

						//Çàïğîñ íà ïğîñìîòğ ğåçóëüòàòîâ â ôàéëå
						SetColor(5, 0);
						cout << "Æåëàåòå ïîñìîòğåòü ğåçóëüòàòû?(";
						SetColor(2, 0);
						cout << "Y";
						SetColor(15, 0);
						cout << "/";
						SetColor(4, 0);
						cout << "N";
						SetColor(15, 0);
						cout << ")\n-> ";
						cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

						if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
						{
							//Îòêğûòèå ôàéëà
							system("notepad.exe RESULT.txt");
						}
						else
						{
							return 0;
						}

						//Çàïğîñ íà ïîâòîğ èãğû
						SetColor(15, 0);
						SetColor(5, 0);
						cout << "\n\nÆåëàåòå ñûãğàòü åù¸ ğàç?(";
						SetColor(2, 0);
						cout << "Y";
						SetColor(15, 0);
						cout << "/";
						SetColor(4, 0);
						cout << "N";
						SetColor(15, 0);
						cout << ")\n-> ";
						cin >> choice; //Îòâåò ïîëüçîâàòåëÿ

						if (choice == "Y" or choice == "y" or choice == "Í" or choice == "í")
						{
							main();
						}
						else
						{
							return 0;
						}
						return 0;
					}
				}
			}
			else if (choise == 2)
			{
				//Ïğàâèëà èãğû
				system("cls");
				SetColor(5, 0);
				cout << "	Ïğàâèëà èãğû:\n";
				cout << "1. Èãğà ñîçäàíà äëÿ äâóõ èãğîêîâ, êîòîğûå ïî î÷åğåäè áğîñàşò äâå êîñòè:\n   à) ïåğâàÿ êîñòü - øèğèíà ïğÿìîóãîëüíèêà(ïî øêàëå Y);\n   á) âòîğàÿ êîñòü - äëèíà ïğÿìîóãîëüíèêà(ïî øêàëå X);\n\n";
				cout << "2.       Äëèíà\n    === === === ===\n   |";
				SetColor(10, 10);
				cout << "   ";
				SetColor(5, 0);
				cout << "|   |   |   |\n    === === === ===   Øèğèíà\n   |   |   |   |";
				SetColor(12, 12);
				cout << "   ";
				SetColor(5, 0);
				cout << "| \n    === === === === \n\n";
				cout << "   ";
				SetColor(10, 10);
				cout << "   ";
				SetColor(5, 0);
				cout << " - íà÷àëî ïîñòàíîâêè ïğÿìîóãîëüíèêà ïåğâîãî èãğîêà.\n\n";
				cout << "   ";
				SetColor(12, 12);
				cout << "   ";
				SetColor(5, 0);
				cout << " - íà÷àëî ïîñòàíîâêè ïğÿìîóãîëüíèêà âòîğîãî èãğîêà.\n\n";
				cout << "3. Óñëîâèÿ ïîñòàíîâêè ïğÿìîóãîëüíèêà:\n   à) âûáğàííàÿ êëåòêà ñîïğèêàñàåòñÿ ñ çàõâà÷åííîé òåğğèòîğèåé ñâåğõó ëèáî ñíèçó;\n   á) âûáğàííàÿ êëåòêà äîëæíà áûòü íåéòğàëüíîé;\n   â) ïğÿìîóãîëüíèê íå ìîæåò çàõîäèòü íà çàõâà÷åííóş òåğğèòîğèş, òîëüêî íà íåéòğàëüíóş;\n\n";
				cout << "4. Åñëè âû âûáğàëè íåïğàâèëüíóş êîîğäèíàòó, òî ó âàñ åñòü âîçìîæíîñòü ïîìåíÿòü êëåòêó ëèáî ïåğåáğîñèòü êóáèêè. Ïåğåáğîñèòü ìîæíî 3 ğàçà.\n\n";
				cout << "5. Óñëîâèÿ îêîí÷àíèÿ èãğû:\n   a) åñëè ïåğâûé è âòîğîé èãğîê íå ñìîãëè çàâîåâàòü òåğğèòîğèş;\n   á) åñëè âñå êëåòêè çàâî¸âàíû;\n\n";
				SetColor(15, 0);
				system("pause");
			}
			else if (choise == 3)
			{
				return 0;
			}
		}
	}
	return 0;
}